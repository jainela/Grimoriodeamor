import{g as K,R as B,r as n,j as a}from"./index-629d6268.js";var U={exports:{}},X="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Y=X,J=Y;function V(){}function W(){}W.resetWarningCache=V;var Q=function(){function e(u,j,v,x,f,l){if(l!==J){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function s(){return e}var d={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:W,resetWarningCache:V};return d.PropTypes=d,d};U.exports=Q();var Z=U.exports;const p=K(Z);const R=n.memo(({currentPage:e=0,totalPages:s=1,onNext:d,onPrev:u,onRandomSpell:j,onAddSpell:v,onToggleTheme:x,onToggleSound:f,soundEnabled:l=!0,theme:h="dusk",isLoading:t=!1,isMobile:G=!1})=>{const[b,T]=n.useState(0),[A,M]=n.useState(!1),[$,m]=n.useState(!1),[q,D]=n.useState(0),C=n.useRef(0),w=n.useRef(null),k=n.useRef(null);n.useEffect(()=>{const N=s>0?(e+1)/s*100:0,i=()=>{const o=C.current,c=N-o;if(Math.abs(c)<.1){C.current=N,T(N);return}C.current=o+c*.1,T(C.current),w.current=requestAnimationFrame(i)};return w.current=requestAnimationFrame(i),()=>{w.current&&cancelAnimationFrame(w.current)}},[e,s]);const E=n.useCallback(()=>(!k.current&&l&&(k.current=new(window.AudioContext||window.webkitAudioContext)),k.current),[l]),r=n.useCallback(N=>{if(!l)return;const i=E();if(i)try{const o=i.createOscillator(),c=i.createGain(),y=i.currentTime;o.connect(c),c.connect(i.destination);const H={nav:{freq:523.25,duration:.15,type:"sine"},page:{freq:392,duration:.2,type:"sine"},magic:{freq:659.25,duration:.4,type:"triangle"},button:{freq:440,duration:.1,type:"square"}},g=H[N]||H.nav;o.frequency.setValueAtTime(g.freq,y),o.type=g.type,c.gain.setValueAtTime(0,y),c.gain.linearRampToValueAtTime(.1,y+.01),c.gain.exponentialRampToValueAtTime(.01,y+g.duration),o.start(y),o.stop(y+g.duration),setTimeout(()=>{o.disconnect(),c.disconnect()},g.duration*1e3+100)}catch(o){console.warn("Error al reproducir sonido:",o)}},[l,E]);n.useEffect(()=>{const N=i=>{const o=Date.now();if(o-q<300||t||i.target.tagName==="INPUT"||i.target.tagName==="TEXTAREA")return;let c=!1;switch(i.key.toLowerCase()){case"arrowleft":case"a":e>0&&(i.preventDefault(),u==null||u(),r("page"),c=!0);break;case"arrowright":case"d":e<s-1&&(i.preventDefault(),d==null||d(),r("page"),c=!0);break;case"r":j&&(i.preventDefault(),D(o),j(),r("magic"),c=!0);break;case"n":case"a":v&&(i.preventDefault(),v(),r("button"),c=!0);break;case"s":f&&(i.preventDefault(),f(),r("button"),c=!0);break;case"t":x&&(i.preventDefault(),x(),r("nav"),c=!0);break;case"b":case"m":r("button");break;case"escape":e>0&&(i.preventDefault(),u==null||u(),r("nav"));break}c&&D(o)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[e,s,u,d,j,v,f,x,q,t,r]),n.useEffect(()=>()=>{k.current&&k.current.state!=="closed"&&k.current.close()},[]);const O=n.useCallback(()=>{e===0||t||(r("page"),u==null||u())},[e,t,u,r]),S=n.useCallback(()=>{e===s-1||t||(r("page"),d==null||d())},[e,s,t,d,r]),z=n.useCallback(()=>{t||!j||(r("magic"),j())},[t,j,r]),F=n.useCallback(()=>{t||!v||(r("button"),v())},[t,v,r]),_=n.useCallback(()=>{r("button"),f==null||f()},[f,r]),I=n.useCallback(()=>{r("nav"),x==null||x()},[x,r]);return G?a.jsxs("nav",{className:"navigation-container mobile","aria-label":"NavegaciÃ³n principal","data-theme":h,"data-loading":t,children:[a.jsx("div",{className:"nav-main-controls",children:a.jsxs("div",{className:"page-controls-mobile",children:[a.jsx("button",{onClick:O,disabled:e===0||t,className:"nav-button prev-button","aria-label":"PÃ¡gina anterior","aria-disabled":e===0,onTouchStart:()=>m(!0),onTouchEnd:()=>m(!1),children:a.jsx("span",{className:"button-icon","aria-hidden":"true",children:"â€¹"})}),a.jsx("div",{className:"page-indicator-mobile",children:a.jsxs("div",{className:"page-number","aria-live":"polite",children:[a.jsx("span",{className:"current-page",children:e+1}),a.jsx("span",{className:"page-separator","aria-hidden":"true",children:"/"}),a.jsx("span",{className:"total-pages",children:s})]})}),a.jsx("button",{onClick:S,disabled:e===s-1||t,className:"nav-button next-button","aria-label":"PÃ¡gina siguiente","aria-disabled":e===s-1,onTouchStart:()=>m(!0),onTouchEnd:()=>m(!1),children:a.jsx("span",{className:"button-icon","aria-hidden":"true",children:"â€º"})})]})}),a.jsxs("div",{className:"progress-container",children:[a.jsx("div",{className:"progress-bar",role:"progressbar","aria-valuenow":Math.round(b),"aria-valuemin":"0","aria-valuemax":"100",children:a.jsx("div",{className:"progress-fill",style:{width:`${b}%`},"data-progress":Math.round(b),children:a.jsx("div",{className:"progress-glow"})})}),a.jsxs("div",{className:"progress-text",children:[a.jsxs("span",{className:"progress-percent",children:[Math.round(b),"%"]}),a.jsx("span",{className:"sr-only",children:"completado"})]})]}),a.jsxs("div",{className:"nav-secondary-controls-mobile",children:[a.jsx("button",{onClick:z,className:"nav-button random-button","aria-label":"Hechizo aleatorio de consuelo",disabled:t,children:a.jsx("span",{className:"button-icon","aria-hidden":"true",children:"âœ¨"})}),a.jsx("button",{onClick:F,className:"nav-button add-button","aria-label":"Agregar nuevo hechizo",disabled:t,children:a.jsx("span",{className:"button-icon","aria-hidden":"true",children:"+"})}),a.jsx("button",{onClick:_,className:`config-button sound-button ${l?"enabled":"disabled"}`,"aria-label":l?"Desactivar sonido":"Activar sonido",children:a.jsx("span",{className:"config-icon","aria-hidden":"true",children:l?"ðŸ”Š":"ðŸ”‡"})}),a.jsx("button",{onClick:I,className:"config-button theme-button","aria-label":`Cambiar a tema ${h==="dusk"?"nocturno":"crepuscular"}`,children:a.jsx("span",{className:"config-icon","aria-hidden":"true",children:h==="dusk"?"ðŸŒ™":"â˜€ï¸"})})]})]}):a.jsxs("nav",{className:"navigation-container","aria-label":"NavegaciÃ³n principal",onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),"data-theme":h,"data-loading":t,"data-hovering":A,children:[a.jsxs("div",{className:"nav-main-controls",children:[a.jsxs("div",{className:"page-controls",children:[a.jsxs("button",{onClick:O,disabled:e===0||t,className:`nav-button prev-button ${e===0||t?"disabled":""}`,"aria-label":"PÃ¡gina anterior","aria-disabled":e===0,onMouseDown:()=>m(!0),onMouseUp:()=>m(!1),onMouseLeave:()=>m(!1),"data-pressed":$,children:[a.jsx("span",{className:"button-icon","aria-hidden":"true",children:"â€¹"}),a.jsx("span",{className:"button-text",children:t?"Cargando...":"Anterior"})]}),a.jsxs("div",{className:"page-indicator",children:[a.jsxs("div",{className:"page-number-display","aria-live":"polite",children:[a.jsx("span",{className:"current-page",children:t?"...":e+1}),a.jsx("span",{className:"page-separator","aria-hidden":"true",children:"/"}),a.jsx("span",{className:"total-pages",children:s})]}),a.jsx("div",{className:"page-label","aria-hidden":"true",children:"PÃGINA"})]}),a.jsxs("button",{onClick:S,disabled:e===s-1||t,className:`nav-button next-button ${e===s-1||t?"disabled":""}`,"aria-label":"PÃ¡gina siguiente","aria-disabled":e===s-1,onMouseDown:()=>m(!0),onMouseUp:()=>m(!1),onMouseLeave:()=>m(!1),"data-pressed":$,children:[a.jsx("span",{className:"button-text",children:t?"Cargando...":"Siguiente"}),a.jsx("span",{className:"button-icon","aria-hidden":"true",children:"â€º"})]})]}),a.jsxs("div",{className:"progress-container",children:[a.jsx("div",{className:"progress-bar",role:"progressbar","aria-valuenow":Math.round(b),"aria-valuemin":"0","aria-valuemax":"100","aria-label":`Progreso de lectura: ${Math.round(b)}%`,children:a.jsxs("div",{className:"progress-fill",style:{width:`${b}%`},"data-progress":Math.round(b),children:[a.jsx("div",{className:"progress-glow"}),a.jsx("div",{className:"progress-sparkle"})]})}),a.jsxs("div",{className:"progress-text",children:[a.jsxs("span",{className:"progress-percent",children:[Math.round(b),"%"]}),a.jsx("span",{className:"progress-label",children:"completado"}),A&&a.jsxs("span",{className:"progress-hint",children:[e+1," de ",s," pÃ¡ginas"]})]})]})]}),a.jsxs("div",{className:"nav-secondary-controls",children:[a.jsxs("button",{onClick:z,className:"nav-button random-button","aria-label":"Abrir un hechizo aleatorio para consuelo",title:"Presiona R para hechizo aleatorio",disabled:t,"data-tooltip":"Hechizo aleatorio (R)",children:[a.jsx("span",{className:"button-icon","aria-hidden":"true",children:"âœ¨"}),a.jsx("span",{className:"button-text",children:"Consuelo aleatorio"}),a.jsx("span",{className:"button-badge","aria-hidden":"true",children:"Nuevo"})]}),a.jsxs("button",{onClick:F,className:"nav-button add-button","aria-label":"Agregar nuevo hechizo",title:"Presiona N para agregar hechizo",disabled:t,"data-tooltip":"Agregar hechizo (N)",children:[a.jsx("span",{className:"button-icon","aria-hidden":"true",children:"+"}),a.jsx("span",{className:"button-text",children:"Escribir hechizo"})]}),a.jsxs("div",{className:"config-controls",children:[a.jsxs("button",{onClick:_,className:`config-button sound-button ${l?"enabled":"disabled"}`,"aria-label":l?"Sonido activado. Click para desactivar":"Sonido desactivado. Click para activar",title:`Sonido ${l?"activado":"desactivado"} (Presiona S)`,"data-tooltip":`Sonido ${l?"ON":"OFF"} (S)`,children:[a.jsx("span",{className:"config-icon","aria-hidden":"true",children:l?"ðŸ”Š":"ðŸ”‡"}),a.jsx("span",{className:"sr-only",children:l?"Sonido activado":"Sonido desactivado"})]}),a.jsxs("button",{onClick:I,className:"config-button theme-button","aria-label":`Cambiar a tema ${h==="dusk"?"nocturno":"crepuscular"}`,title:`Tema actual: ${h==="dusk"?"crepuscular":"nocturno"} (Presiona T)`,"data-tooltip":`Tema: ${h==="dusk"?"Crepuscular":"Nocturno"} (T)`,children:[a.jsx("span",{className:"config-icon","aria-hidden":"true",children:h==="dusk"?"ðŸŒ™":"â˜€ï¸"}),a.jsxs("span",{className:"sr-only",children:["Cambiar a tema ",h==="dusk"?"nocturno":"crepuscular"]})]})]})]}),a.jsxs("div",{className:"nav-hints",role:"complementary","aria-label":"Atajos de teclado",children:[a.jsxs("div",{className:"hint-item",children:[a.jsx("kbd",{className:"hint-key",children:"â† â†’"}),a.jsx("span",{className:"hint-text",children:"Navegar pÃ¡ginas"})]}),a.jsxs("div",{className:"hint-item",children:[a.jsx("kbd",{className:"hint-key",children:"R"}),a.jsx("span",{className:"hint-text",children:"Hechizo aleatorio"})]}),a.jsxs("div",{className:"hint-item",children:[a.jsx("kbd",{className:"hint-key",children:"N"}),a.jsx("span",{className:"hint-text",children:"Agregar hechizo"})]}),a.jsxs("div",{className:"hint-item",children:[a.jsx("kbd",{className:"hint-key",children:"T"}),a.jsx("span",{className:"hint-text",children:"Cambiar tema"})]})]}),a.jsxs("div",{className:"nav-decoration","aria-hidden":"true",children:[a.jsx("div",{className:"decoration-line left"}),a.jsxs("div",{className:"decoration-symbols",children:[a.jsx("span",{role:"img","aria-label":"estrella mÃ¡gica",children:"âœ¦"}),a.jsx("span",{role:"img","aria-label":"rombo encantado",children:"âœ§"}),a.jsx("span",{role:"img","aria-label":"flor mÃ­stica",children:"â"})]}),a.jsx("div",{className:"decoration-line right"})]}),a.jsxs("div",{className:"nav-tooltips","aria-hidden":"true",children:[a.jsx("div",{className:"tooltip","data-for":"random-button",children:"Presiona R"}),a.jsx("div",{className:"tooltip","data-for":"add-button",children:"Presiona N"}),a.jsx("div",{className:"tooltip","data-for":"sound-button",children:"Presiona S"}),a.jsx("div",{className:"tooltip","data-for":"theme-button",children:"Presiona T"})]})]})});R.propTypes={currentPage:p.number.isRequired,totalPages:p.number.isRequired,onNext:p.func.isRequired,onPrev:p.func.isRequired,onRandomSpell:p.func,onAddSpell:p.func,onToggleTheme:p.func,onToggleSound:p.func,soundEnabled:p.bool,theme:p.oneOf(["dusk","night"]),isLoading:p.bool,isMobile:p.bool};const L=(e,s)=>e.currentPage===s.currentPage&&e.totalPages===s.totalPages&&e.soundEnabled===s.soundEnabled&&e.theme===s.theme&&e.isLoading===s.isLoading&&e.isMobile===s.isMobile;R.displayName="Navigation";const aa=B.memo(R,L);export{aa as default};
